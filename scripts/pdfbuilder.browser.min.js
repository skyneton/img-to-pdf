function PDFBuilder(){"use strict";if(void 0===new.target)throw new Error("Constructor must be called with new.");let t,e=0,o=[],r=[];this.addPage=(()=>{let r,a,h;if(arguments.length>1&&("number"==typeof arguments[0]?(r=arguments[0],a=arguments[1],h=arguments[2]):(r=arguments[0].orientation,a=arguments[0].format,h=arguments[0].rotate)),e=o.length,void 0===r&&void 0===a&&void 0===h)o[e]={media:{width:t.width,height:t.height,format:t.format,rotate:t.rotate}};else{r=r||t.orientation,a=a||t.format,h=h||t.rotate;const n=i(r,a);o[e]={media:{width:n.width,height:n.height,format:n.format,rotate:h}}}}),this.setPageWidth=function(){if(0==arguments.length)throw new Error("너비를 입력해주세요.");let t,r;if(arguments.length>=2?(t=arguments[0],r=arguments[1]):r=arguments[0],t|=e,isNaN(t)||isNaN(r))throw new Error("숫자 형태로 입력해주세요.");o[t].media.width=r},this.setPageHeight=function(){if(0==arguments.length)throw new Error("너비를 입력해주세요.");let t,r;if(arguments.length>=2?(t=arguments[0],r=arguments[1]):r=arguments[0],t|=e,isNaN(t)||isNaN(r))throw new Error("숫자 형태로 입력해주세요.");o[t].media.height=r},this.getPageWidth=function(){let t=arguments[0];if(void 0===t&&(t=e),isNaN(t))throw new Error("숫자를 입력해주세요.");if(t<0||Math.floor(t)!=t)throw new Error("0 이상의 정수여야 합니다.");return o[t].media.width},this.getPageHeight=function(){let t=arguments[0];if(void 0===t&&(t=e),isNaN(t))throw new Error("숫자를 입력해주세요.");if(t<0||Math.floor(t)!=t)throw new Error("0 이상의 정수여야 합니다.");return o[t].media.height},this.removePage=(t=>{o=o.splice(t,1)}),this.setPage=(t=>{e=t}),this.getNumberOfPages=(()=>o.length),this.getNowPage=(()=>e);const i=(t,e)=>{const o={a0:[2384,3370],a1:[1684,2384],a2:[1191,1684],a3:[842,1191],a4:[595,842],a5:[420,595],a6:[298,420],a7:[210,298],a8:[147,210],a9:[105,147],a10:[74,105],b0:[2835,4008],b1:[2004,2835],b2:[1417,2004],b3:[1001,1417],b4:[709,1001],b5:[499,709],b6:[354,499],b7:[249,354],b8:[176,249],b9:[125,176],b10:[88,125],c0:[2599,3677],c1:[1837,2599],c2:[1298,1837],c3:[918,1298],c4:[649,918],c5:[459,649],c6:[323,459],c7:[230,323],c8:[162,230],c9:[113,162],c10:[79,113],dl:[312,624],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};let r,i;if("auto"==(e=(e||"auto").toLowerCase())?e="auto":o[e.toLowerCase()]?(i=o[e.toLowerCase()][0],r=o[e.toLowerCase()][1]):(i=(e="custom")[0],r=e[1]),("l"==(t=(t||"p").toLowerCase())||"landscape"==t)&&r>i){const t=i;i=r,r=t}else if(("p"==t||"portrait"==t)&&i>r){const t=i;i=r,r=t}return{width:i,height:r,format:e,orientation:t}};this.drawImage=function(){let t,o,r,i,h=arguments[0];if(void 0===h)throw new Error("이미지를 입력해주세요.");if(t=arguments[1]||"0",o=arguments[2]||"0",r=arguments[3],i=arguments[4],"object"==typeof h&&"src"in h&&(r=r||h.naturalWidth,i=i||h.naturalHeight,h=h.src),isNaN(t)||isNaN(o))throw new Error("x, y는 숫자 형태여야 합니다.");return void 0!==t&&(t=P(t,5)),void 0!==o&&(o=P(o,5)),void 0!==r&&(r=P(r,5)),void 0!==i&&(i=P(i,5)),a(e,h,t,o,r,i)};const a=(t,e,i,a,n,d)=>new Promise(c=>{w(e).then(e=>{const s=u(e);if(this.isImageNotSupported(s))throw new Error(`${s} 형식은 지원하지 않는 이미지입니다.`);const g=p(e).toString();if(null!=r[g])return r[g].connection++,null==o[t].image&&(o[t].image=[]),o[t].image.push({hash:g,width:n||r[g].width,height:d||r[g].height,x:i,y:a}),void c("drawing finish");h(t,e,i,a,n,d,g,s),c("drawing finish")})}),h=(t,e,i,a,h,n,c,s)=>{const g=d(e,s);"data"in g&&(e=g.data);const l=f(g.numComponents);if(void 0===l)throw new Error("Color Space를 가져오는데 실패하였습니다.");r[c]={data:e,width:g.width,height:g.height,colorSpace:l,bitsPerComponent:8,connection:1},null==o[t].image&&(o[t].image=[]),o[t].image.push({hash:c,x:i,y:a,width:h||g.width,height:n||g.height})},n=[192,193,194,195,196,197,198,199],d=(t,e)=>{switch(e){case"JPEG":return c(t)}},c=t=>{let e,o,r,i=256*t.charCodeAt(4)+t.charCodeAt(5);for(let a=4;a<t.length;a+=2){if(a+=i,-1!=n.indexOf(t.charCodeAt(a+1)))return o=256*t.charCodeAt(a+5)+t.charCodeAt(a+6),e=256*t.charCodeAt(a+7)+t.charCodeAt(a+8),r=t.charCodeAt(a+9),t.length>a+420&&(1==o&&o<256*t.charCodeAt(a+425)+t.charCodeAt(a+426)&&(o=256*t.charCodeAt(a+425)+t.charCodeAt(a+426),t.length>a+427&&(e=256*t.charCodeAt(a+427)+t.charCodeAt(a+428))),1==r&&t.length>a+429&&(1==t.charCodeAt(a+429)||3==t.charCodeAt(a+429)||4==t.charCodeAt(a+429))&&(r=t.charCodeAt(a+429))),{width:e,height:o,numComponents:r};i=256*t.charCodeAt(a+2)+t.charCodeAt(a+3)}};this.isImageNotSupported=(t=>!N()[t]);const s="DeviceRGB",g="DeviceGray",l="DeviceCMYK",f=t=>{let e;switch(t){case 1:e=g;break;case 3:e=s;break;case 4:e=l}return e},w=async t=>A(t)?t.split(",")[1]:("object"==typeof t&&"src"in t&&(t=t.src),v(t)&&(t=await fetch(t).then(t=>t.blob())),(b(t)||C(t))&&(t=await t.arrayBuffer(),t=new Uint8Array(t)),t instanceof Uint8Array?m(t):void 0),m=t=>{let e="";const o=t.byteLength||t.length;for(let r=0;r<o;r++)e+=String.fromCharCode(t[r]);return e},u=t=>{const e=N();for(const o in e){const r=e[o];for(let e=0;e<r.length;e++){let i=!0;for(let o=0;o<r[e].length;o++)if(void 0!==r[e][o]&&r[e][o]!==t.charCodeAt(o)){i=!1;break}if(i)return o}}return"UNKNOWN"},C=t=>t instanceof File,b=t=>t instanceof Blob,v=t=>"string"==typeof t&&t.startsWith("blob:"),A=t=>"string"==typeof t&&t.startsWith("data:image"),N=()=>({PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]}),p=t=>{let e=0;for(let o=0;o<t.length;o++)e=(e<<5)-e+t.charCodeAt(o),e|=0;return e},P=(t,e)=>Math.round(t*10**e)/10**e;(()=>{let e,r,a;arguments.length>=1&&("number"==typeof arguments[0]?(e=arguments[0],r=arguments[1],a=arguments[2]):(e=arguments[0].orientation,r=arguments[0].format,a=arguments[0].rotate));const h=i(e,r);t={orientation:h.orientation,width:h.width,height:h.height,format:h.format,rotate:a},o[0]={media:{width:h.width,height:h.height,format:h.format,rotate:a}}})()}