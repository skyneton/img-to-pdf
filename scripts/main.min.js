let pdfBlockMove;const fileDragOverEvent=e=>{e.stopPropagation(),e.preventDefault()};document.getElementsByClassName("fileAddBox")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;document.getElementsByClassName("inpFile")[0].click()}),window.ondragover=(()=>{pdfBlockMove||(event.stopPropagation(),event.preventDefault())}),window.ondrop=(()=>{if(event.stopPropagation(),event.preventDefault(),document.getElementsByClassName("downloadLoadingPage").length>0)return!1;const e=(()=>"up"==document.getElementsByClassName("orderByCommandBtn")[0].getAttribute("data-type")?[...event.target.files||event.dataTransfer.files].sort((e,t)=>e.name==t.name?0:e.name>t.name?1:-1):[...event.target.files||event.dataTransfer.files].sort((e,t)=>e.name==t.name?0:e.name<t.name?1:-1))();for(let t=0;t<e.length;t++)imageFileAdd(e[t]);pdfBlockMove=void 0}),document.getElementsByClassName("inpFile")[0].onchange=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;const e=(()=>"up"==document.getElementsByClassName("orderByCommandBtn")[0].getAttribute("data-type")?[...event.target.files||event.dataTransfer.files].sort((e,t)=>e.name==t.name?0:e.name>t.name?1:-1):[...event.target.files||event.dataTransfer.files].sort((e,t)=>e.name==t.name?0:e.name<t.name?1:-1))();for(let t=0;t<e.length;t++)imageFileAdd(e[t])}),document.getElementsByClassName("orderByCommandBtn")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;const e=document.getElementsByClassName("imageListBox")[0],t=document.getElementsByClassName("fileAddBox")[0],n=[...document.getElementsByClassName("imageBox")];(()=>"up"==document.getElementsByClassName("orderByCommandBtn")[0].getAttribute("data-type")?n.sort((e,t)=>(e=e.getElementsByClassName("imageName")[0].innerText)==(t=t.getElementsByClassName("imageName")[0].innerText)?0:e>t?1:-1):n.sort((e,t)=>(e=e.getElementsByClassName("imageName")[0].innerText)==(t=t.getElementsByClassName("imageName")[0].innerText)?0:e<t?1:-1))().forEach(n=>{e.insertBefore(n,t)})}),document.getElementsByClassName("pdfOptionFormat")[0].onchange=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;"auto"!=event.target.value?(document.getElementsByClassName("pdfOptionOrientation")[0].disabled=!1,document.getElementsByClassName("imageListBox")[0].setAttribute("format",(()=>"landscape"==document.getElementsByClassName("pdfOptionOrientation")[0].value?"b":"a")())):(document.getElementsByClassName("pdfOptionOrientation")[0].disabled=!0,document.getElementsByClassName("imageListBox")[0].hasAttribute("format")&&document.getElementsByClassName("imageListBox")[0].removeAttribute("format"))}),document.getElementsByClassName("pdfOptionOrientation")[0].onchange=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;"auto"!=document.getElementsByClassName("pdfOptionFormat")[0].value&&document.getElementsByClassName("imageListBox")[0].setAttribute("format",(()=>"landscape"==event.target.value?"b":"a")())}),document.getElementsByClassName("orderByTypeBtn")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;document.getElementsByClassName("orderByTypeBtn")[0].time||(document.getElementsByClassName("orderByTypeBtn")[0].getElementsByTagName("svg")[0].getElementsByTagName("path")[0].setAttribute("d","M13.3333 12L7.99992 6.5L2.66659 12L1.33325 10.6667L7.99992 4L14.6666 10.6667L13.3333 12Z"),document.getElementsByClassName("orderByTypeBtn")[0].setAttribute("active",!0)),document.getElementsByClassName("orderByTypeBtn")[0].time=void 0}),document.getElementsByClassName("orderByOptionItem")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;const e=document.getElementsByClassName("orderByCommandBtn")[0].innerText;document.getElementsByClassName("orderByCommandBtn")[0].innerText=document.getElementsByClassName("orderByOptionItem")[0].innerText,document.getElementsByClassName("orderByOptionItem")[0].innerText=e;const t=document.getElementsByClassName("orderByCommandBtn")[0].getAttribute("data-type");document.getElementsByClassName("orderByCommandBtn")[0].setAttribute("data-type",document.getElementsByClassName("orderByOptionItem")[0].getAttribute("data-type")),document.getElementsByClassName("orderByOptionItem")[0].setAttribute("data-type",t)}),window.onmouseup=(()=>{if(document.getElementsByClassName("orderByTypeBtn")[0].hasAttribute("active")){let e=event.target;for(let t=0;t<4;t++){if(e==document.getElementsByClassName("orderByTypeBtn")[0]){e.time=!0;break}if(!e.parentElement)break;e=e.parentElement}document.getElementsByClassName("orderByTypeBtn")[0].removeAttribute("active"),document.getElementsByClassName("orderByTypeBtn")[0].getElementsByTagName("svg")[0].getElementsByTagName("path")[0].setAttribute("d","M13.3333 4L14.6666 5.33333L7.99992 12L1.33325 5.33333L2.66659 4L7.99992 9.5L13.3333 4Z")}}),document.getElementsByClassName("clear")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;for(;document.getElementsByClassName("imageBox").length>0;)URL.revokeObjectURL(document.getElementsByClassName("imageBox")[0].getElementsByTagName("img")[0].src),document.getElementsByClassName("imageBox")[0].remove()}),document.getElementsByClassName("transform")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;if(document.getElementsByClassName("imageBox").length<=0)return;const e=createLoadingPage((()=>"이미지 PDF 변환"==document.title?"PDF를 생성중입니다.":"イメージを PDF に変換"==document.title?"PDFを作成中です。":"Generating PDF.")());document.body.appendChild(e);const t=document.getElementsByClassName("pdfOptionOrientation")[0].value,n=document.getElementsByClassName("pdfOptionFormat")[0].value,a=document.getElementsByClassName("imageBox"),o=document.getElementsByClassName("pdfOptionCompress")[0].value;setTimeout(()=>{location.protocol.startsWith("http")&&Worker?imageListPDFByThread(e,t,n,a,o).catch(t=>{console.error(t),e.remove(),alert((()=>"이미지 PDF 변환"==document.title?"알수없는 오류!":"イメージを PDF に変換"==document.title?"不明なエラーです。":"Unknown error!")())}):imageListPDF(e,t,n,a,o).catch(t=>{console.error(t),e.remove(),alert((()=>"이미지 PDF 변환"==document.title?"알수없는 오류!":"イメージを PDF に変換"==document.title?"不明なエラーです。":"Unknown error!")())})},700)});const imageFileAdd=e=>{if(!e.type.startsWith("image/")||e.type.includes("svg"))return;const t=document.createElement("div");t.setAttribute("class","imageBox"),t.setAttribute("draggable",!0);const n=document.getElementsByClassName("imageListBox")[0],a=document.getElementsByClassName("fileAddBox")[0],o=document.querySelector("body>.deleteBtn"),s=o.cloneNode();for(let e=0;e<o.children.length;e++)s.appendChild(o.children[e].cloneNode());s.setAttribute("draggable",!1),t.appendChild(s);const m=document.createElement("div");m.setAttribute("class","imageContainer"),t.appendChild(m);const l=document.createElement("div");l.setAttribute("class","imageCanvas");const r=document.createElement("img");if("image/jpeg"==e.type)r.src=URL.createObjectURL(new Blob([e],{type:e.type}));else{const t=new Image;t.src=URL.createObjectURL(new Blob([e],{type:"image/jpeg"})),t.onload=(()=>{const e=document.createElement("canvas"),n=t.naturalWidth,a=t.naturalHeight;e.width=n,e.height=a,e.getContext("2d").drawImage(t,0,0,n,a),URL.revokeObjectURL(t.src),e.toBlob?e.toBlob(i,"image/jpeg"):i(e.toDataURL("image/jpeg")),e.remove(),t.remove()})}l.appendChild(r),m.appendChild(l);const d=document.createElement("div");function i(e){"string"==typeof e&&(e=new Blob(e.split(",")[1],"image/jpeg")),r.src=URL.createObjectURL(e)}d.setAttribute("class","imageName"),d.setAttribute("draggable",!1),d.innerText=e.name,t.appendChild(d),n.insertBefore(t,a),r.ondragstart=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;pdfBlockMove=t,event.dataTransfer.setDragImage(r,r.offsetWidth/2,r.offsetHeight/2)}),t.ondragstart=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;pdfBlockMove=t,event.dataTransfer.setDragImage(r,r.offsetWidth/2,r.offsetHeight/2)}),t.ondragover=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;if(pdfBlockMove)switch(event.preventDefault(),dragDivLocation(event)){case 0:t.setAttribute("dragLoc",0);break;case 1:t.setAttribute("dragLoc",1)}}),t.ondragleave=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;pdfBlockMove&&t.hasAttribute("dragLoc")&&t.removeAttribute("dragLoc")}),t.ondrop=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;if(!pdfBlockMove)return;t.hasAttribute("dragLoc")&&t.removeAttribute("dragLoc");const e=pdfBlockMove;switch(pdfBlockMove=void 0,dragDivLocation(event)){case 0:t.insertAdjacentElement("beforebegin",e);break;case 1:t.insertAdjacentElement("afterend",e)}}),s.onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;URL.revokeObjectURL(r.src),t.remove()})},dragDivLocation=e=>e.target.offsetWidth/2<e.offsetX?1:0,createLoadingPage=e=>{const t=document.createElement("div");t.setAttribute("class","downloadLoadingPage");const n=document.createElement("div");n.setAttribute("class","loadingPageMessage"),n.innerHTML=e;const a=document.createElement("div");return a.setAttribute("class","loadingPageProgressBar"),t.appendChild(n),t.appendChild(a),t};window.onkeydown=(()=>{36==event.keyCode?(document.getElementsByClassName("imageListBox")[0].scrollTop=0,event.preventDefault()):35==event.keyCode&&(document.getElementsByClassName("imageListBox")[0].scrollTop=document.getElementsByClassName("imageListBox")[0].scrollHeight,event.preventDefault())});