let pdfBlockMove;(()=>{const e=document.createElement("canvas"),t=(()=>{try{return!!JPEG}catch{return!1}})();if(!(e&&e.getContext&&e.getContext("2d")&&t))return document.getElementsByClassName("version_not_supported")[0].style.display="block",void(document.getElementsByClassName("img_to_pdf_info")[0].style.display="none");getCookie("beforeVisited")&&(document.getElementsByClassName("img_to_pdf_info")[0].style.display="none"),setCookie("beforeVisited",!0,365)})();const jpeg=new JPEG,fileDragOverEvent=e=>{e.stopPropagation(),e.preventDefault()};document.getElementsByClassName("info")[0].onclick=(()=>{"none"==document.getElementsByClassName("img_to_pdf_info")[0].style.display&&(document.getElementsByClassName("img_to_pdf_info")[0].style.display=null)}),document.getElementsByClassName("img_to_pdf_info")[0].onclick=(()=>{document.getElementsByClassName("img_to_pdf_info")[0].style.display="none"}),document.getElementsByClassName("fileAddBox")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;document.getElementsByClassName("inpFile")[0].click()}),window.ondragover=(()=>{pdfBlockMove||(event.stopPropagation(),event.preventDefault())}),window.ondrop=(async()=>{if(event.stopPropagation(),event.preventDefault(),document.getElementsByClassName("downloadLoadingPage").length>0)return!1;const e=(()=>{const e=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}),t=[...event.target.files||event.dataTransfer.files].sort((t,n)=>e.compare(t.name,n.name));return"up"==document.getElementsByClassName("orderByCommandBtn")[0].getAttribute("data-type")?t:t.reverse()})();for(let t=0;t<e.length;t++)"application/pdf"===e[t].type?pdfFileAdd(e[t]):imageFileAdd(e[t]);pdfBlockMove=void 0}),document.getElementsByClassName("inpFile")[0].onchange=(async()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;const e=(()=>{const e=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}),t=[...event.target.files||event.dataTransfer.files].sort((t,n)=>e.compare(t.name,n.name));return"up"==document.getElementsByClassName("orderByCommandBtn")[0].getAttribute("data-type")?t:t.reverse()})();for(let t=0;t<e.length;t++)"application/pdf"===e[t].type&&pdfFileAdd(e[t]),imageFileAdd(e[t]);document.getElementsByClassName("inpFile")[0].value=null}),document.getElementsByClassName("orderByCommandBtn")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;const e=document.getElementsByClassName("imageListBox")[0],t=document.getElementsByClassName("fileAddBox")[0],n=[...document.getElementsByClassName("imageBox")];(()=>{const e=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}),t=n.sort((t,n)=>e.compare(t.getElementsByClassName("imageName")[0].innerText,n.getElementsByClassName("imageName")[0].innerText));return"up"==document.getElementsByClassName("orderByCommandBtn")[0].getAttribute("data-type")?t:t.reverse()})().forEach(n=>{e.insertBefore(n,t)})}),document.getElementsByClassName("pdfOptionFormat")[0].onchange=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;"auto"!=event.target.value?(document.getElementsByClassName("pdfOptionOrientation")[0].disabled=!1,document.getElementsByClassName("imageListBox")[0].setAttribute("format",(()=>"landscape"==document.getElementsByClassName("pdfOptionOrientation")[0].value?"b":"a")())):(document.getElementsByClassName("pdfOptionOrientation")[0].disabled=!0,document.getElementsByClassName("imageListBox")[0].hasAttribute("format")&&document.getElementsByClassName("imageListBox")[0].removeAttribute("format"))}),document.getElementsByClassName("pdfOptionOrientation")[0].onchange=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;"auto"!=document.getElementsByClassName("pdfOptionFormat")[0].value&&document.getElementsByClassName("imageListBox")[0].setAttribute("format",(()=>"landscape"==event.target.value?"b":"a")())}),document.getElementsByClassName("orderByTypeBtn")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;document.getElementsByClassName("orderByTypeBtn")[0].time||(document.getElementsByClassName("orderByTypeBtn")[0].getElementsByTagName("svg")[0].getElementsByTagName("path")[0].setAttribute("d","M13.3333 12L7.99992 6.5L2.66659 12L1.33325 10.6667L7.99992 4L14.6666 10.6667L13.3333 12Z"),document.getElementsByClassName("orderByTypeBtn")[0].setAttribute("active",!0)),document.getElementsByClassName("orderByTypeBtn")[0].time=void 0}),document.getElementsByClassName("orderByOptionItem")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;const e=document.getElementsByClassName("orderByCommandBtn")[0].innerText;document.getElementsByClassName("orderByCommandBtn")[0].innerText=document.getElementsByClassName("orderByOptionItem")[0].innerText,document.getElementsByClassName("orderByOptionItem")[0].innerText=e;const t=document.getElementsByClassName("orderByCommandBtn")[0].getAttribute("data-type");document.getElementsByClassName("orderByCommandBtn")[0].setAttribute("data-type",document.getElementsByClassName("orderByOptionItem")[0].getAttribute("data-type")),document.getElementsByClassName("orderByOptionItem")[0].setAttribute("data-type",t)}),window.onmouseup=(()=>{if(document.getElementsByClassName("orderByTypeBtn")[0].hasAttribute("active")){let e=event.target;for(let t=0;t<4;t++){if(e==document.getElementsByClassName("orderByTypeBtn")[0]){e.time=!0;break}if(!e.parentElement)break;e=e.parentElement}document.getElementsByClassName("orderByTypeBtn")[0].removeAttribute("active"),document.getElementsByClassName("orderByTypeBtn")[0].getElementsByTagName("svg")[0].getElementsByTagName("path")[0].setAttribute("d","M13.3333 4L14.6666 5.33333L7.99992 12L1.33325 5.33333L2.66659 4L7.99992 9.5L13.3333 4Z")}}),document.getElementsByClassName("clear")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;for(;document.getElementsByClassName("imageBox").length>0;)URL.revokeObjectURL(document.getElementsByClassName("imageBox")[0].getElementsByTagName("img")[0].src),document.getElementsByClassName("imageBox")[0].remove()}),document.getElementsByClassName("transform")[0].onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;if(document.getElementsByClassName("imageBox").length<=0)return;const e=createLoadingPage((()=>document.title.includes("이미지 PDF 변환")?"PDF를 생성중입니다.":document.title.includes("イメージを PDF に変換 - イメージを無料でPDF変換")?"PDFを作成中です。":"Generating PDF.")());document.body.appendChild(e);const t=document.getElementsByClassName("pdfOptionOrientation")[0].value,n=document.getElementsByClassName("pdfOptionFormat")[0].value,a=document.getElementsByClassName("imageBox"),o=document.getElementsByClassName("pdfOptionCompress")[0].value;location.protocol.startsWith("http")&&Worker?imageListPDFByThread(e,t,n,a,o).catch(t=>{console.error(t),e.remove(),alert((()=>document.title.includes("이미지 PDF 변환")?"알수없는 오류!":document.title.includes("イメージを PDF に変換")?"不明なエラーです。":"Unknown error!")())}):imageListPDF(e,t,n,a,o).catch(t=>{console.error(t),e.remove(),alert((()=>document.title.includes("이미지 PDF 변환")?"알수없는 오류!":document.title.includes("イメージを PDF に変換")?"不明なエラーです。":"Unknown error!")())})});const createImageBox=e=>{const t=document.createElement("div");t.setAttribute("class","imageBox"),t.setAttribute("draggable",!0);const n=document.querySelector("body>.deleteBtn"),a=n.cloneNode();for(let e=0;e<n.children.length;e++)a.appendChild(n.children[e].cloneNode());a.setAttribute("draggable",!1),t.appendChild(a);const o=document.createElement("div");o.setAttribute("class","imageContainer"),t.appendChild(o);const s=document.createElement("div");s.setAttribute("class","imageCanvas");const m=document.createElement("img");s.appendChild(m),o.appendChild(s);const l=document.createElement("div");return l.setAttribute("class","imageName"),l.setAttribute("draggable",!1),l.innerText=e,t.appendChild(l),m.ondragstart=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;pdfBlockMove=t,event.dataTransfer.setDragImage(m,m.offsetWidth/2,m.offsetHeight/2)}),t.ondragstart=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;pdfBlockMove=t,event.dataTransfer.setDragImage(m,m.offsetWidth/2,m.offsetHeight/2)}),t.ondragover=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;if(pdfBlockMove)switch(event.preventDefault(),dragDivLocation(event)){case 0:t.setAttribute("dragLoc",0);break;case 1:t.setAttribute("dragLoc",1)}}),t.ondragleave=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;pdfBlockMove&&t.hasAttribute("dragLoc")&&t.removeAttribute("dragLoc")}),t.ondrop=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;if(!pdfBlockMove)return;t.hasAttribute("dragLoc")&&t.removeAttribute("dragLoc");const e=pdfBlockMove;switch(pdfBlockMove=void 0,dragDivLocation(event)){case 0:t.insertAdjacentElement("beforebegin",e);break;case 1:t.insertAdjacentElement("afterend",e)}}),a.onclick=(()=>{if(document.getElementsByClassName("downloadLoadingPage").length>0)return event.preventDefault(),!1;URL.revokeObjectURL(m.src),t.remove()}),t},pdfPageConvertImage=(e,t,n,a)=>{const o=e.getElementsByClassName("imageContainer")[0].getElementsByTagName("img")[0],s=()=>{t.numImageConverts>=t.numPages&&(t.close(),console.log(a,t.pdfLoadedTime-Date.now(),"ms"))};t.getPageImage({success(e){o.src=URL.createObjectURL(e),s()},error(t){e.remove(),alert((()=>document.title.includes("이미지 PDF 변환")?`알수없는 오류!\n${a} ${n}Page`:document.title.includes("イメージを PDF に変換\n${file.name}")?`不明なエラーです。\n${a} ${n}Page`:`Unknown error!\n${a} ${n}Page`)()),console.error(t),s()},scale:96/72*.8},n)},pdfFileAdd=async e=>{try{const t=await loadendPdfReader(e),n=document.getElementsByClassName("imageListBox")[0],a=document.getElementsByClassName("fileAddBox")[0];for(let o=0;o<t.numPages;o++){const s=createImageBox(`${e.name.substring(0,e.name.lastIndexOf("."))} ${o+1}`);n.insertBefore(s,a),pdfPageConvertImage(s,t,o+1,e.name)}}catch(e){console.error(e)}return!0},loadendPdfReader=e=>new Promise((t,n)=>{const a=new PDFReader({numWorkers:3,success(){t(a)},error(e){n(e)}},e)}),imageFileAdd=e=>{if(!e.type.startsWith("image/")||e.type.includes("dds"))return;const t=document.getElementsByClassName("imageListBox")[0],n=document.getElementsByClassName("fileAddBox")[0],a=createImageBox(e.name);t.insertBefore(a,n);const o=a.getElementsByClassName("imageContainer")[0].getElementsByTagName("img")[0];jpeg.start(e,{success(e){o.src=URL.createObjectURL(e)},error(){alert((()=>document.title.includes("이미지 PDF 변환")?`알수없는 오류!\n${e.name}`:document.title.includes("イメージを PDF に変換\n${file.name}")?`不明なエラーです。\n${e.name}`:`Unknown error!\n${e.name}`)()),a.remove()}})},dragDivLocation=e=>e.target.offsetWidth/2<e.offsetX?1:0,createLoadingPage=e=>{const t=document.createElement("div");t.setAttribute("class","downloadLoadingPage");const n=document.createElement("div");n.setAttribute("class","loadingPageMessage"),n.innerHTML=e;const a=document.createElement("div");return a.setAttribute("class","loadingPageProgressBar"),t.appendChild(n),t.appendChild(a),t};window.onkeydown=(()=>{36==event.keyCode?(document.getElementsByClassName("imageListBox")[0].scrollTop=0,event.preventDefault()):35==event.keyCode&&(document.getElementsByClassName("imageListBox")[0].scrollTop=document.getElementsByClassName("imageListBox")[0].scrollHeight,event.preventDefault())});